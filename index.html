<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VLC Web Media Player</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/libvlc-wasm@0.3.0/libvlc.js"></script>
    <style>
        :root {
            --vlc-orange: #ff8800;
            --vlc-dark: #1a1a1a;
            --vlc-darker: #0f0f0f;
            --vlc-gray: #2a2a2a;
            --vlc-light-gray: #3a3a3a;
        }
        
        body {
            background-color: var(--vlc-darker);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .vlc-player {
            background-color: var(--vlc-dark);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }
        
        .vlc-controls {
            background-color: var(--vlc-gray);
            padding: 10px;
        }
        
        .vlc-button {
            background-color: transparent;
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .vlc-button:hover {
            background-color: var(--vlc-light-gray);
        }
        
        .vlc-button.active {
            color: var(--vlc-orange);
        }
        
        .vlc-seekbar {
            width: 100%;
            height: 5px;
            background-color: var(--vlc-light-gray);
            border-radius: 5px;
            margin: 10px 0;
            cursor: pointer;
            position: relative;
        }
        
        .vlc-progress {
            height: 100%;
            background-color: var(--vlc-orange);
            border-radius: 5px;
            width: 0%;
        }
        
        .vlc-time {
            font-size: 12px;
            color: #aaa;
        }
        
        .vlc-volume-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .vlc-volume-slider {
            width: 80px;
            height: 4px;
            background-color: var(--vlc-light-gray);
            border-radius: 2px;
            cursor: pointer;
        }
        
        .vlc-volume-level {
            height: 100%;
            background-color: var(--vlc-orange);
            border-radius: 2px;
            width: 80%;
        }
        
        .vlc-drop-area {
            border: 2px dashed var(--vlc-light-gray);
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            transition: all 0.3s;
            margin-bottom: 20px;
        }
        
        .vlc-drop-area.active {
            border-color: var(--vlc-orange);
            background-color: rgba(255, 136, 0, 0.1);
        }
        
        .vlc-metadata {
            background-color: var(--vlc-gray);
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 12px;
        }
        
        .vlc-error {
            background-color: rgba(220, 53, 69, 0.2);
            color: #f8d7da;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            display: none;
        }
        
        .vlc-icon {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }
        
        @media (max-width: 768px) {
            .vlc-controls-grid {
                grid-template-columns: 1fr 2fr 1fr;
            }
            
            .vlc-metadata {
                font-size: 10px;
            }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="container max-w-4xl mx-auto">
        <h1 class="text-2xl font-bold text-center mb-6 text-[#ff8800]">VLC Web Media Player</h1>
        
        <div class="vlc-player">
            <!-- Drop Area -->
            <div id="dropArea" class="vlc-drop-area">
                <svg class="vlc-icon mx-auto mb-4" viewBox="0 0 24 24">
                    <path d="M14,13V17H10V13H7L12,8L17,13M19.35,10.03C18.67,6.59 15.64,4 12,4C9.11,4 6.6,5.64 5.35,8.03C2.34,8.36 0,10.9 0,14A6,6 0 0,0 6,20H19A5,5 0 0,0 24,15C24,12.36 21.95,10.22 19.35,10.03Z" />
                </svg>
                <p class="text-lg mb-2">Drag and drop media files here</p>
                <p class="text-sm text-gray-400 mb-4">or</p>
                <button id="filePicker" class="vlc-button bg-[#ff8800] text-black px-4 py-2 rounded font-medium">
                    Browse Files
                </button>
                <input type="file" id="fileInput" class="hidden" accept="video/*,audio/*">
            </div>
            
            <!-- Video Container -->
            <div id="videoContainer" class="relative bg-black aspect-video flex items-center justify-center">
                <canvas id="videoCanvas" class="w-full h-full"></canvas>
                <div id="playButton" class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 cursor-pointer">
                    <svg class="vlc-icon w-16 h-16" viewBox="0 0 24 24">
                        <path d="M8,5.14V19.14L19,12.14L8,5.14Z" />
                    </svg>
                </div>
                <div id="buffering" class="absolute hidden">
                    <div class="flex space-x-2">
                        <div class="w-2 h-2 bg-white rounded-full animate-pulse"></div>
                        <div class="w-2 h-2 bg-white rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                        <div class="w-2 h-2 bg-white rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
                    </div>
                </div>
            </div>
            
            <!-- Error Display -->
            <div id="errorDisplay" class="vlc-error">
                <p id="errorMessage"></p>
            </div>
            
            <!-- Player Controls -->
            <div class="vlc-controls">
                <!-- Metadata -->
                <div id="metadata" class="vlc-metadata mb-3 hidden">
                    <div class="flex justify-between">
                        <span id="fileInfo">File: -</span>
                        <span id="codecInfo">Codec: -</span>
                        <span id="resolutionInfo">Resolution: -</span>
                        <span id="durationInfo">Duration: -</span>
                    </div>
                </div>
                
                <!-- Controls Grid -->
                <div class="vlc-controls-grid grid grid-cols-3 gap-4 items-center">
                    <!-- Left Controls -->
                    <div class="flex items-center space-x-2">
                        <button id="playPause" class="vlc-button">
                            <svg class="vlc-icon" viewBox="0 0 24 24">
                                <path id="playIcon" d="M8,5.14V19.14L19,12.14L8,5.14Z" />
                                <path id="pauseIcon" d="M14,19H18V5H14M6,19H10V5H6V19Z" style="display: none" />
                            </svg>
                        </button>
                        <button id="stop" class="vlc-button">
                            <svg class="vlc-icon" viewBox="0 0 24 24">
                                <path d="M18,18H6V6H18V18Z" />
                            </svg>
                        </button>
                        <div class="vlc-volume-container">
                            <button id="mute" class="vlc-button">
                                <svg class="vlc-icon" viewBox="0 0 24 24">
                                    <path id="volumeHigh" d="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z" />
                                    <path id="volumeMuted" d="M12,4L9.91,6.09L12,8.18M4.27,3L3,4.27L7.73,9H3V15H7L12,20V13.27L16.25,17.53L15,18.73L12,15.73V20L7,15H4.27L10,9.27L4.27,3Z" style="display: none" />
                                </svg>
                            </button>
                            <div class="vlc-volume-slider">
                                <div id="volumeLevel" class="vlc-volume-level"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Center Controls -->
                    <div class="flex flex-col items-center">
                        <div class="vlc-seekbar">
                            <div id="progress" class="vlc-progress"></div>
                        </div>
                        <div class="flex justify-between w-full text-xs">
                            <span id="currentTime" class="vlc-time">00:00</span>
                            <span id="totalTime" class="vlc-time">00:00</span>
                        </div>
                    </div>
                    
                    <!-- Right Controls -->
                    <div class="flex items-center justify-end space-x-2">
                        <div class="relative">
                            <button id="speedButton" class="vlc-button flex items-center">
                                <span>1x</span>
                                <svg class="vlc-icon w-4 h-4 ml-1" viewBox="0 0 24 24">
                                    <path d="M7,10L12,15L17,10H7Z" />
                                </svg>
                            </button>
                            <div id="speedMenu" class="absolute bottom-full right-0 mb-2 bg-[#2a2a2a] rounded shadow-lg hidden z-10">
                                <button data-speed="0.25" class="vlc-speed-option vlc-button block w-full text-left px-4 py-2 hover:bg-[#3a3a3a]">0.25x</button>
                                <button data-speed="0.5" class="vlc-speed-option vlc-button block w-full text-left px-4 py-2 hover:bg-[#3a3a3a]">0.5x</button>
                                <button data-speed="0.75" class="vlc-speed-option vlc-button block w-full text-left px-4 py-2 hover:bg-[#3a3a3a]">0.75x</button>
                                <button data-speed="1" class="vlc-speed-option vlc-button block w-full text-left px-4 py-2 hover:bg-[#3a3a3a]">1x</button>
                                <button data-speed="1.25" class="vlc-speed-option vlc-button block w-full text-left px-4 py-2 hover:bg-[#3a3a3a]">1.25x</button>
                                <button data-speed="1.5" class="vlc-speed-option vlc-button block w-full text-left px-4 py-2 hover:bg-[#3a3a3a]">1.5x</button>
                                <button data-speed="2" class="vlc-speed-option vlc-button block w-full text-left px-4 py-2 hover:bg-[#3a3a3a]">2x</button>
                            </div>
                        </div>
                        <button id="fullscreen" class="vlc-button">
                            <svg class="vlc-icon" viewBox="0 0 24 24">
                                <path d="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-6 text-center text-gray-400 text-sm">
            <p>Supports HEVC, H.265, H.264, VP9, MKV, AVI, FLAC, MP3 and more</p>
        </div>
    </div>

    <script>
        // Global variables
        let vlcPlayer = null;
        let isPlaying = false;
        let isMuted = false;
        let currentVolume = 80;
        let currentSpeed = 1;
        let mediaFile = null;
        
        // DOM Elements
        const videoCanvas = document.getElementById('videoCanvas');
        const playButton = document.getElementById('playButton');
        const playPause = document.getElementById('playPause');
        const stopButton = document.getElementById('stop');
        const muteButton = document.getElementById('mute');
        const volumeLevel = document.getElementById('volumeLevel');
        const progress = document.getElementById('progress');
        const currentTime = document.getElementById('currentTime');
        const totalTime = document.getElementById('totalTime');
        const speedButton = document.getElementById('speedButton');
        const speedMenu = document.getElementById('speedMenu');
        const fullscreenButton = document.getElementById('fullscreen');
        const fileInput = document.getElementById('fileInput');
        const filePicker = document.getElementById('filePicker');
        const dropArea = document.getElementById('dropArea');
        const metadata = document.getElementById('metadata');
        const fileInfo = document.getElementById('fileInfo');
        const codecInfo = document.getElementById('codecInfo');
        const resolutionInfo = document.getElementById('resolutionInfo');
        const durationInfo = document.getElementById('durationInfo');
        const errorDisplay = document.getElementById('errorDisplay');
        const errorMessage = document.getElementById('errorMessage');
        const videoContainer = document.getElementById('videoContainer');
        const buffering = document.getElementById('buffering');
        
        // Initialize the player
        document.addEventListener('DOMContentLoaded', async () => {
            // Initialize libVLC.js
            try {
                // Note: In a real implementation, you would initialize libVLC.js with proper configuration
                // vlcPlayer = await createVLCPlayer(videoCanvas);
                console.log("VLC Player would be initialized here");
                
                // Set up event listeners
                setupEventListeners();
            } catch (error) {
                showError("Failed to initialize media player: " + error.message);
            }
        });
        
        // Set up event listeners
        function setupEventListeners() {
            // File selection
            filePicker.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', handleFileSelect);
            
            // Drag and drop
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, preventDefaults, false);
            });
            
            ['dragenter', 'dragover'].forEach(eventName => {
                dropArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, unhighlight, false);
            });
            
            dropArea.addEventListener('drop', handleDrop, false);
            
            // Player controls
            playButton.addEventListener('click', togglePlay);
            playPause.addEventListener('click', togglePlay);
            stopButton.addEventListener('click', stopPlayback);
            muteButton.addEventListener('click', toggleMute);
            
            // Volume control
            volumeLevel.parentElement.addEventListener('click', setVolume);
            
            // Seek bar
            progress.parentElement.addEventListener('click', seek);
            
            // Speed control
            speedButton.addEventListener('click', toggleSpeedMenu);
            document.querySelectorAll('.vlc-speed-option').forEach(option => {
                option.addEventListener('click', setPlaybackSpeed);
            });
            
            // Fullscreen
            fullscreenButton.addEventListener('click', toggleFullscreen);
            
            // Close speed menu when clicking elsewhere
            document.addEventListener('click', (e) => {
                if (!speedButton.contains(e.target) && !speedMenu.contains(e.target)) {
                    speedMenu.classList.add('hidden');
                }
            });
        }
        
        // Prevent default drag behaviors
        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }
        
        // Highlight drop area
        function highlight() {
            dropArea.classList.add('active');
        }
        
        // Unhighlight drop area
        function unhighlight() {
            dropArea.classList.remove('active');
        }
        
        // Handle dropped files
        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            
            if (files.length > 0) {
                handleFiles(files);
            }
        }
        
        // Handle file selection
        function handleFileSelect(e) {
            const files = e.target.files;
            if (files.length > 0) {
                handleFiles(files);
            }
        }
        
        // Process selected files
        function handleFiles(files) {
            const file = files[0];
            
            // Check if file is a media file
            if (!file.type.startsWith('video/') && !file.type.startsWith('audio/')) {
                showError("Please select a valid media file (video or audio)");
                return;
            }
            
            mediaFile = file;
            loadMedia(file);
        }
        
        // Load media file
        function loadMedia(file) {
            // Hide drop area and show metadata
            dropArea.classList.add('hidden');
            metadata.classList.remove('hidden');
            
            // Reset error display
            hideError();
            
            // Update file info
            fileInfo.textContent = `File: ${file.name}`;
            codecInfo.textContent = `Codec: ${file.type}`;
            
            // In a real implementation, we would use libVLC.js to get actual codec and resolution info
            // For demo purposes, we'll simulate this
            setTimeout(() => {
                resolutionInfo.textContent = "Resolution: 1920x1080";
                durationInfo.textContent = "Duration: 02:15:30";
            }, 500);
            
            // Show buffering indicator
            buffering.classList.remove('hidden');
            
            // Simulate loading media (in a real implementation, this would use libVLC.js)
            setTimeout(() => {
                buffering.classList.add('hidden');
                playButton.style.display = 'none';
                isPlaying = true;
                updatePlayPauseButton();
                
                // Start simulated playback progress
                simulatePlayback();
            }, 1500);
        }
        
        // Toggle play/pause
        function togglePlay() {
            if (!mediaFile) return;
            
            isPlaying = !isPlaying;
            updatePlayPauseButton();
            
            if (isPlaying) {
                playButton.style.display = 'none';
                // In a real implementation: vlcPlayer.play()
            } else {
                // In a real implementation: vlcPlayer.pause()
            }
        }
        
        // Stop playback
        function stopPlayback() {
            isPlaying = false;
            updatePlayPauseButton();
            playButton.style.display = 'flex';
            progress.style.width = '0%';
            currentTime.textContent = '00:00';
            
            // In a real implementation: vlcPlayer.stop()
        }
        
        // Toggle mute
        function toggleMute() {
            isMuted = !isMuted;
            
            const volumeHigh = document.getElementById('volumeHigh');
            const volumeMuted = document.getElementById('volumeMuted');
            
            if (isMuted) {
                volumeHigh.style.display = 'none';
                volumeMuted.style.display = 'block';
                volumeLevel.style.width = '0%';
            } else {
                volumeHigh.style.display = 'block';
                volumeMuted.style.display = 'none';
                volumeLevel.style.width = `${currentVolume}%`;
            }
            
            // In a real implementation: vlcPlayer.audio.toggleMute()
        }
        
        // Set volume
        function setVolume(e) {
            const rect = e.currentTarget.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            currentVolume = Math.max(0, Math.min(100, Math.round(percent * 100)));
            
            if (!isMuted) {
                volumeLevel.style.width = `${currentVolume}%`;
            }
            
            // In a real implementation: vlcPlayer.audio.setVolume(currentVolume)
        }
        
        // Seek to position
        function seek(e) {
            if (!mediaFile) return;
            
            const rect = e.currentTarget.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            progress.style.width = `${percent * 100}%`;
            
            // Update current time (simulated)
            const totalSeconds = 8130; // 2:15:30 in seconds
            const currentSeconds = Math.round(totalSeconds * percent);
            currentTime.textContent = formatTime(currentSeconds);
            
            // In a real implementation: vlcPlayer.setTime(percent * totalDuration)
        }
        
        // Toggle speed menu
        function toggleSpeedMenu() {
            speedMenu.classList.toggle('hidden');
        }
        
        // Set playback speed
        function setPlaybackSpeed(e) {
            currentSpeed = parseFloat(e.target.getAttribute('data-speed'));
            speedButton.querySelector('span').textContent = `${currentSpeed}x`;
            speedMenu.classList.add('hidden');
            
            // In a real implementation: vlcPlayer.setRate(currentSpeed)
        }
        
        // Toggle fullscreen
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                videoContainer.requestFullscreen().catch(err => {
                    console.error(`Error attempting to enable fullscreen: ${err.message}`);
                });
            } else {
                document.exitFullscreen();
            }
        }
        
        // Update play/pause button
        function updatePlayPauseButton() {
            const playIcon = document.getElementById('playIcon');
            const pauseIcon = document.getElementById('pauseIcon');
            
            if (isPlaying) {
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            } else {
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            }
        }
        
        // Format time (seconds to MM:SS)
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        
        // Show error message
        function showError(message) {
            errorMessage.textContent = message;
            errorDisplay.style.display = 'block';
        }
        
        // Hide error message
        function hideError() {
            errorDisplay.style.display = 'none';
        }
        
        // Simulate playback progress (for demo purposes)
        function simulatePlayback() {
            if (!isPlaying) return;
            
            let progressPercent = parseFloat(progress.style.width) || 0;
            
            const interval = setInterval(() => {
                if (!isPlaying) {
                    clearInterval(interval);
                    return;
                }
                
                progressPercent += 0.1;
                if (progressPercent > 100) {
                    progressPercent = 0;
                    isPlaying = false;
                    updatePlayPauseButton();
                    playButton.style.display = 'flex';
                    clearInterval(interval);
                }
                
                progress.style.width = `${progressPercent}%`;
                
                // Update current time (simulated)
                const totalSeconds = 8130; // 2:15:30 in seconds
                const currentSeconds = Math.round(totalSeconds * (progressPercent / 100));
                currentTime.textContent = formatTime(currentSeconds);
            }, 100);
        }
    </script>
</body>
</html>
